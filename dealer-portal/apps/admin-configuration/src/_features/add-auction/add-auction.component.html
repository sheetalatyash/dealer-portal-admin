<div class="create-auction-wrapper min-vh-100 p-0">
  <form [formGroup]="auctionForm" class="auction-form" (ngSubmit)="submitForm()">
    <div class="bg-blue-light w-100 mb-3 header-bar">
      <div class="alert alert-info d-flex align-items-center justify-content-between border px-3 py-2 m-0">
        <div class="d-flex align-items-center gap-2">
          <div class="border border-2 border-danger rounded-circle p-2">
            <polaris-icon color="danger" size="xl">{{ 'createAuction.edit' | translate }}</polaris-icon>
          </div>
          <p class="mb-0 small">{{ 'createAuction.title' | translate }}</p>
        </div>

        <div class="d-flex align-items-center gap-3">
          <polaris-button ui-theme="tertiary" [compact]="true" type="button">{{
            'createAuction.cancel' | translate
          }}</polaris-button>
          <polaris-button ui-theme="primary" [compact]="true" type="submit" (onClick)="_navigateToCreateLane()">{{
            'createAuction.add-new-auction' | translate
          }}</polaris-button>
        </div>
      </div>
    </div>
    <div class="d-flex mb-3 align-items-center py-3 px-4">
      <div class="m-0">
        <h3>{{ 'createAuction.new-auction' | translate }}</h3>
      </div>
    </div>

    <div class="row g-3 px-3 mx-0">
      <div class="col-12 col-md-6">
        <div class="card p-3">
          <div class="card-body">
            <h5 class="card-title mb-4">{{ 'createAuction.edit-details' | translate }}</h5>
            <polaris-divider ui-class="col-auto mb-3"></polaris-divider>

            <div class="mb-3">
              <label class="form-label mb-1 me-1">{{ 'createAuction.name' | translate }}</label>
              <polaris-input
                [ui-label]="'Auction Name'"
                ui-form-control-name="auctionName"
                ui-test-id="add-auction-auctionName-input"
                [ui-placeholder]="'createAuction.auction-name-placeholder' | translate"
                [ui-show-label]="false"
              ></polaris-input>
            </div>

            <div class="row lanes-selection-wrap mb-3">
              <div class="col-12 col-lg-6 d-flex flex-wrap pe-lg-2">
                <div class="d-flex align-items-center mb-1">
                  <label class="form-label pe-1 me-1">{{ 'createAuction.specify-number-of-lanes' | translate }}</label>
                  <polaris-select
                    ui-form-control-name="numberOfLanes"
                    [ui-show-label]="false"
                    ui-test-id="add-auction-numberOfLanes-select"
                    [options]="laneOptions"
                    [ui-class]="'d-block'"
                  ></polaris-select>
                </div>
              </div>
              <div class="col-12 col-lg-6 d-flex flex-wrap ps-lg-2 pt-3 pt-lg-0 mb-3">
                <div class="d-flex align-items-center mb-1">
                  <label class="form-label pe-1 me-1">{{
                    'createAuction.specify-lane-stagger-amount' | translate
                  }}</label>
                  <polaris-select
                    [ui-label]="'Lane Stagger'"
                    ui-form-control-name="laneStagger"
                    ui-test-id="add-auction-laneStagger-input"
                    ui-type="number"
                    [ui-show-label]="false"
                    [options]="laneOptions"
                    [ui-class]="'d-block'"
                  ></polaris-select>
                </div>
              </div>
            </div>

            <div class="apply-auction-rules-wrap mb-3">
              <div class="row align-items-center">
                <div class="col-12 col-md-auto">
                  <label class="form-label mb-1 me-1 text-nowrap">{{ 'createAuction.apply-rules' | translate }}</label>
                </div>
                <div class="col-12 col-md-auto">
                  <polaris-select
                    ui-form-control-name="auctionRules"
                    ui-test-id="add-auction-auctionRules-select"
                    [ui-show-label]="false"
                    [options]="auctionRulesOptions"
                  ></polaris-select>
                </div>
              </div>
            </div>

            <div *ngIf="auctionForm.get('auctionRules')?.value === 4">
              <div class="row align-items-center mb-2">
                <div class="col-2">
                  <label class="mb-1">{{ 'createAuction.dc' | translate }}</label>
                </div>
                <div class="col-8">
                  <polaris-checkbox [ui-form-control]="dcControl" [ui-show-label]="false"></polaris-checkbox>
                </div>
              </div>
              <div class="row align-items-center mb-2">
                <div class="col-2">
                  <label class="mb-1">{{ 'createAuction.pl' | translate }}</label>
                </div>
                <div class="col-8">
                  <polaris-checkbox [ui-form-control]="plControl" [ui-show-label]="false"></polaris-checkbox>
                </div>
              </div>
              <div class="row align-items-center mb-2">
                <div class="col-2">
                  <label class="mb-1">{{ 'createAuction.country' | translate }}</label>
                </div>
                <div class="col-8">
                  <polaris-button
                    [compact]="true"
                    type="button"
                    ui-theme="secondary"
                    (click)="toggleCountryCode('US')"
                    [ui-class]="auctionForm.get('countries')?.value.includes('US') ? 'primary-country-btn' : ''"
                    class="me-2"
                  >
                    {{ 'createAuction.us' | translate }}
                  </polaris-button>

                  <polaris-button
                    [compact]="true"
                    type="button"
                    ui-theme="secondary"
                    (click)="toggleCountryCode('CA')"
                    [ui-class]="auctionForm.get('countries')?.value.includes('CA') ? 'primary-country-btn' : ''"
                  >
                    {{ 'createAuction.can' | translate }}
                  </polaris-button>
                </div>
              </div>
            </div>

            <div class="row align-items-center mb-2">
              <div class="col-2">
                <label class="mb-1">{{ 'createAuction.buy-now' | translate }}</label>
              </div>
              <div class="col-8">
                <polaris-checkbox [ui-form-control]="buyNowControl" [ui-show-label]="false"></polaris-checkbox>
              </div>
            </div>

            <div class="mt-4">
              <h6 class="fw-bold text-uppercase mb-3">{{ 'createAuction.listing-defaults' | translate }}</h6>

              <div class="mb-3">
                <label class="form-label mb-1">{{ 'createAuction.min-bid-increment' | translate }}</label>
                <polaris-input
                  [ui-label]="'Bid Increment'"
                  [ui-placeholder]="'createAuction.min-bid-increment-placeholder' | translate"
                  ui-form-control-name="bidIncrement"
                  ui-test-id="add-auction-bidIncrement-input"
                  ui-type="number"
                  [ui-show-label]="false"
                >
                </polaris-input>
              </div>

              <div class="mb-3">
                <label class="form-label mb-1">{{ 'createAuction.duration' | translate }}</label>
                <polaris-input
                  [ui-label]="'Duration'"
                  ui-form-control-name="duration"
                  [ui-placeholder]="'createAuction.duration-placeholder' | translate"
                  ui-test-id="add-auction-duration-input"
                  ui-type="number"
                  [ui-show-label]="false"
                >
                </polaris-input>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="col-12 col-md-6">
        <div class="card">
          <div class="card-body p-3">
            <h5 class="card-title mb-4">{{ 'createAuction.schedule' | translate }}</h5>
            <polaris-divider ui-class="col-auto mb-3"></polaris-divider>

            <div class="mb-3">
              <label class="form-label mb-1">{{ 'createAuction.auction-day' | translate }}</label>
              <polaris-date-picker
                ui-test-id="auction-date-input"
                [ui-placeholder]="'createAuction.date-placeholder' | translate"
                ui-form-control-name="auctionDate"
              >
              </polaris-date-picker>
            </div>

            <div class="mb-3 time-select-wrapper">
              <label class="form-label mb-1">{{ 'createAuction.start-time' | translate }}</label>
              <div class="row auction-start-time g-2 mx-0">
                <div class="col-12 col-sm-4 px-0 pe-sm-1 mb-2 mb-sm-0">
                  <div class="select-container w-100">
                    <polaris-select
                      ui-form-control-name="startHour"
                      [options]="hourOptions"
                      [ui-show-label]="false"
                      ui-placeholder="Hour"
                    ></polaris-select>
                  </div>
                </div>
                <div class="col-12 col-sm-4 px-0 pe-sm-1 mb-2 mb-sm-0">
                  <div class="select-container w-100">
                    <polaris-select
                      ui-form-control-name="startMinute"
                      [options]="minuteOptions"
                      [ui-show-label]="false"
                      ui-placeholder="Minute"
                    ></polaris-select>
                  </div>
                </div>
                <div class="col-12 col-sm-4 px-0">
                  <div class="select-container w-100">
                    <polaris-select
                      ui-form-control-name="startPeriod"
                      ui-test-id="auction-start-period-select"
                      [ui-show-label]="false"
                      [options]="periodOptions"
                    ></polaris-select>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </form>
</div>
